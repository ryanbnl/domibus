<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd">

    <!-- properties - to be used in column definitions -->
    <include file="../common/changelog-properties.xml" relativeToChangelogFile="true"/>

    <changeSet author="idragusa" id="EDELIVERY-4740">
        <comment>Plugin specific tables</comment>
        <createTable tableName="WS_PLUGIN_TB_MESSAGE_LOG">
            <column name="ID_PK" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" primaryKeyName="PK_WS_PLUGIN_TB_MESSAGE_LOG"/>
            </column>
            <column name="MESSAGE_ID" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="FINAL_RECIPIENT" type="VARCHAR(255)"/>
            <column name="RECEIVED" type="TIMESTAMP" defaultValueComputed="${now}">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet author="tincuse" id="EDELIVERY-4915">
        <comment>Add audit columns in all configuration and run-time tables</comment>

        <addColumn tableName="TB_ACTION">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_ACTION_AUDIT">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_AGREEMENT">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addNotNullConstraint tableName="TB_ALERT" columnName="CREATION_TIME" columnDataType="TIMESTAMP" defaultNullValue="${now}" />
        <addColumn tableName="TB_ALERT">
            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_AUTHENTICATION_ENTRY">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_BACKEND_FILTER">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_BUSINESS_PROCESS">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_CERTIFICATE">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addNotNullConstraint tableName="TB_COMMAND" columnName="CREATION_TIME" columnDataType="TIMESTAMP" defaultNullValue="${now}" />
        <addColumn tableName="TB_COMMAND">
            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_COMMAND_PROPERTY">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_CONFIGURATION">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_CONFIGURATION_RAW">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_ENCRYPTION_KEY">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_ERROR">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_ERROR_HANDLING">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_ERROR_LOG">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_EVENT">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_EVENT_ALERT">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_EVENT_PROPERTY">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_JOIN_PAYLOAD_PROFILE">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_JOIN_PROCESS_INIT_PARTY">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_JOIN_PROCESS_LEG">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_JOIN_PROCESS_RESP_PARTY">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_JOIN_PROPERTY_SET">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_LEG">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_LEG_TB_MPC">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MEP">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MEP_BINDING">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MESSAGE_ACKNW">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MESSAGE_ACKNW_PROP">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MESSAGE_FRAGMENT">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MESSAGE_GROUP">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MESSAGE_HEADER">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MESSAGE_INFO">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addNotNullConstraint tableName="TB_MESSAGE_LOG" columnName="CREATED_BY" columnDataType="VARCHAR(255)" defaultNullValue="${current_db_user}" />
        <addColumn tableName="TB_MESSAGE_LOG">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MESSAGE_PROPERTY">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MESSAGE_PROPERTY_SET">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MESSAGE_UI">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MESSAGING">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MESSAGING_LOCK">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_MPC">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_PARTY">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_PARTY_ID">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_PARTY_IDENTIFIER">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_PARTY_ID_TYPE">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_PART_INFO">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_PAYLOAD">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_PAYLOAD_PROFILE">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_PLUGIN_USER_PASSWD_HISTORY">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_PROCESS">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_PROPERTY">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_RAWENVELOPE_LOG">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_RECEIPT">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_RECEIPT_DATA">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_RECEPTION_AWARENESS">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_RELIABILITY">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_REV_CHANGES">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_ROLE">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_ROUTING_CRITERIA">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_SECURITY">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_SEND_ATTEMPT">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_SERVICE">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_SIGNAL_MESSAGE">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_SPLITTING">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_USER">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_USER_MESSAGE">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_USER_PASSWORD_HISTORY">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_USER_ROLE">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>

        <addColumn tableName="TB_USER_ROLES">
            <column defaultValueComputed="${now}" name="CREATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was created">
                <constraints nullable="false"/>
            </column>

            <column defaultValueComputed="${current_db_user}" name="CREATED_BY" type="VARCHAR(255)" remarks="The user who created this record">
                <constraints nullable="false"/>
            </column>

            <column name="MODIFICATION_TIME" type="TIMESTAMP" remarks="The date and time when this record was last modified"/>

            <column name="MODIFIED_BY" type="VARCHAR(255)" remarks="The user who last modified this record"/>
        </addColumn>
    </changeSet>
    <changeSet author="Cosmin Baciu" id="EDELIVERY-6391" dbms="oracle">
        <alterSequence sequenceName="HIBERNATE_SEQUENCE"
                       cacheSize="100"
        />
    </changeSet>

    <changeSet author="Sebastian-Ion TINCU" id="EDELIVERY-6595-2">
        <modifyDataType columnName="END_DATE" newDataType="DATETIME" tableName="TB_SEND_ATTEMPT" />
        <modifyDataType columnName="START_DATE" newDataType="DATETIME" tableName="TB_SEND_ATTEMPT" />

        <modifyDataType columnName="NOT_VALID_BEFORE_DATE" newDataType="DATETIME" tableName="TB_CERTIFICATE" />
        <modifyDataType columnName="NOT_VALID_AFTER_DATE" newDataType="DATETIME" tableName="TB_CERTIFICATE" />

        <createView
                replaceIfExists="true"
                viewName="V_AUDIT_DETAIL">
            SELECT
            DISTINCT rc.GROUP_NAME as AUDIT_TYPE,
            rc.MODIFICATION_TYPE as ACTION_TYPE,
            ri.USER_NAME as USER_NAME,
            ri.REVISION_DATE as AUDIT_DATE,
            TRIM(CAST(rc.ENTITY_ID AS CHAR(255))) AS ID,
            TRIM(CAST(ri.ID AS CHAR(19))) AS REV_ID
            FROM TB_REV_INFO ri, TB_REV_CHANGES rc
            WHERE ri.ID=rc.REV
            UNION
            SELECT aa.AUDIT_TYPE,aa.MODIFICATION_TYPE,aa.USER_NAME,aa.REVISION_DATE,aa.ENTITY_ID,'1' FROM
            TB_ACTION_AUDIT aa
        </createView>

        <createView
                replaceIfExists="true"
                viewName="V_AUDIT">
            SELECT *
            FROM V_AUDIT_DETAIL VAD
            ORDER BY VAD.AUDIT_DATE DESC;
        </createView>
    </changeSet>

    <changeSet author="Sebastian-Ion TINCU" id="EDELIVERY-6595-3" dbms="mysql">
        <comment>Adding not null constraint. Because changing datatype was removing not null constraint in mysql
        </comment>
        <addNotNullConstraint columnDataType="DATETIME" columnName="END_DATE" tableName="TB_SEND_ATTEMPT"/>
        <addNotNullConstraint columnDataType="DATETIME" columnName="START_DATE" tableName="TB_SEND_ATTEMPT"/>
    </changeSet>

    <changeSet author="Catalin Enache" id="EDELIVERY-6601">
        <modifyDataType columnName="MAX_SIZE" newDataType="BIGINT" tableName="TB_PAYLOAD_PROFILE" />
    </changeSet>

    <changeSet author="Catalin Enache" id="EDELIVERY-6921">
        <comment>rename PMode associated tables</comment>
        <renameTable oldTableName="TB_ACTION" newTableName="TB_PM_ACTION"/>
        <renameTable oldTableName="TB_AGREEMENT" newTableName="TB_PM_AGREEMENT"/>
        <renameTable oldTableName="TB_BUSINESS_PROCESS" newTableName="TB_PM_BUSINESS_PROCESS"/>
        <renameTable oldTableName="TB_CONFIGURATION" newTableName="TB_PM_CONFIGURATION"/>
        <renameTable oldTableName="TB_CONFIGURATION_AUD" newTableName="TB_PM_CONFIGURATION_AUD"/>
        <renameTable oldTableName="TB_CONFIGURATION_RAW" newTableName="TB_PM_CONFIGURATION_RAW"/>
        <renameTable oldTableName="TB_CONFIGURATION_RAW_AUD" newTableName="TB_PM_CONFIGURATION_RAW_AUD"/>
        <renameTable oldTableName="TB_ERROR_HANDLING" newTableName="TB_PM_ERROR_HANDLING"/>
        <renameTable oldTableName="TB_JOIN_PAYLOAD_PROFILE" newTableName="TB_PM_JOIN_PAYLOAD_PROFILE"/>
        <renameTable oldTableName="TB_JOIN_PROCESS_INIT_PARTY" newTableName="TB_PM_JOIN_PROCESS_INIT_PARTY"/>
        <renameTable oldTableName="TB_JOIN_PROCESS_LEG" newTableName="TB_PM_JOIN_PROCESS_LEG"/>
        <renameTable oldTableName="TB_JOIN_PROCESS_RESP_PARTY" newTableName="TB_PM_JOIN_PROCESS_RESP_PARTY"/>
        <renameTable oldTableName="TB_JOIN_PROPERTY_SET" newTableName="TB_PM_JOIN_PROPERTY_SET"/>
        <renameTable oldTableName="TB_LEG" newTableName="TB_PM_LEG"/>
        <renameTable oldTableName="TB_MPC" newTableName="TB_PM_MPC"/>
        <renameTable oldTableName="TB_LEG_TB_MPC" newTableName="TB_PM_LEG_MPC"/>
        <renameTable oldTableName="TB_MEP" newTableName="TB_PM_MEP"/>
        <renameTable oldTableName="TB_MEP_BINDING" newTableName="TB_PM_MEP_BINDING"/>
        <renameTable oldTableName="TB_MESSAGE_PROPERTY" newTableName="TB_PM_MESSAGE_PROPERTY"/>
        <renameTable oldTableName="TB_MESSAGE_PROPERTY_SET" newTableName="TB_PM_MESSAGE_PROPERTY_SET"/>
        <renameTable oldTableName="TB_PARTY" newTableName="TB_PM_PARTY"/>
        <renameTable oldTableName="TB_PARTY_AUD" newTableName="TB_PM_PARTY_AUD"/>
        <renameTable oldTableName="TB_PARTY_IDENTIFIER" newTableName="TB_PM_PARTY_IDENTIFIER"/>
        <renameTable oldTableName="TB_PARTY_IDENTIFIER_AUD" newTableName="TB_PM_PARTY_IDENTIFIER_AUD"/>
        <renameTable oldTableName="TB_PARTY_ID_TYPE" newTableName="TB_PM_PARTY_ID_TYPE"/>
        <renameTable oldTableName="TB_PARTY_ID_TYPE_AUD" newTableName="TB_PM_PARTY_ID_TYPE_AUD"/>
        <renameTable oldTableName="TB_PAYLOAD" newTableName="TB_PM_PAYLOAD"/>
        <renameTable oldTableName="TB_PAYLOAD_PROFILE" newTableName="TB_PM_PAYLOAD_PROFILE"/>
        <renameTable oldTableName="TB_PROCESS" newTableName="TB_PM_PROCESS"/>
        <renameTable oldTableName="TB_RECEPTION_AWARENESS" newTableName="TB_PM_RECEPTION_AWARENESS"/>
        <renameTable oldTableName="TB_RELIABILITY" newTableName="TB_PM_RELIABILITY"/>
        <renameTable oldTableName="TB_SECURITY" newTableName="TB_PM_SECURITY"/>
        <renameTable oldTableName="TB_SERVICE" newTableName="TB_PM_SERVICE"/>
        <renameTable oldTableName="TB_ROLE" newTableName="TB_PM_ROLE"/>
        <renameTable oldTableName="TB_SPLITTING" newTableName="TB_PM_SPLITTING"/>
    </changeSet>

    <changeSet id="EDELIVERY-6924" author="Ion Perpegel">
        <dropColumn columnName="DOMAIN" tableName="TB_COMMAND"/>
    </changeSet>

    <changeSet id="EDELIVERY-7001" author="Francois Gautier">
        <comment>Add missing FK</comment>

        <addForeignKeyConstraint baseColumnNames="FK_COMMAND" baseTableName="TB_COMMAND_PROPERTY"
                                 constraintName="FK_COMMAND_PROPERTY_ID" deferrable="false"
                                 initiallyDeferred="false" onDelete="CASCADE" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_COMMAND"/>
    </changeSet>

    <changeSet author="Soumya Chandran" id="EDELIVERY-7026">
        <modifyDataType columnName="VALUE" newDataType="VARCHAR(1024)" tableName="TB_PM_PARTY_ID_TYPE"/>
        <modifyDataType columnName="VALUE" newDataType="VARCHAR(1024)" tableName="TB_PM_PARTY_ID_TYPE_AUD"/>
        <modifyDataType columnName="ENDPOINT" newDataType="VARCHAR(1024)" tableName="TB_PM_PARTY"/>
        <modifyDataType columnName="ENDPOINT" newDataType="VARCHAR(1024)" tableName="TB_PM_PARTY_AUD"/>
        <modifyDataType columnName="VALUE" newDataType="VARCHAR(1024)" tableName="TB_PM_MEP"/>
        <modifyDataType columnName="VALUE" newDataType="VARCHAR(1024)" tableName="TB_PM_MEP_BINDING"/>
        <modifyDataType columnName="SCHEMA_FILE" newDataType="VARCHAR(1024)" tableName="TB_PM_PAYLOAD"/>
    </changeSet>

    <changeSet id="DELETE_MESSAGE_METADATA" author="idragusa">
        <addColumn tableName="TB_PM_MPC">
            <column name="RETENTION_SENT"
                    remarks="Retention time for sent messages (both send success and send failure)" type="INT"
                    defaultValueNumeric="-1"/>
            <column name="DELETE_MESSAGE_METADATA"
                    remarks="Specifies whether the message metadata should be deleted or not." type="BOOLEAN"
                    defaultValueBoolean="false"/>
            <column name="MAX_BATCH_DELETE"
                    remarks="Maximum number of DOWNLOADED/UNDOWNLOADED/SENT messages to be deleted in one batch"
                    type="INT" defaultValueNumeric="-1"/>
        </addColumn>
        <dropForeignKeyConstraint baseTableName="TB_PROPERTY"
                                  constraintName="FK_2H31P0A2Y6WEG2GRH70C9CYVA"/>

        <dropForeignKeyConstraint baseTableName="TB_MESSAGING"
                                  constraintName="FK_433RGM5A446T59Q6JKB885L3X"/>

        <dropForeignKeyConstraint baseTableName="TB_MESSAGING"
                                  constraintName="FK_53GP9SMTEMQCUIO8O9T10NARM"/>

        <dropForeignKeyConstraint baseTableName="TB_RECEIPT_DATA"
                                  constraintName="FK_8NCCAE214MVS1KH5SGCJ3Y5OY"/>

        <dropForeignKeyConstraint baseTableName="TB_USER_MESSAGE"
                                  constraintName="FK_BE4XC1069QYW2KLHVM3XMG26S"/>

        <dropForeignKeyConstraint baseTableName="TB_SIGNAL_MESSAGE"
                                  constraintName="FK_C08LJJWI4P9DX1RJTCDBE1SFU"/>

        <dropForeignKeyConstraint baseTableName="TB_PROPERTY"
                                  constraintName="FK_CWYLVG6ERNWBA61MO3YAGMKG8"/>

        <dropForeignKeyConstraint baseTableName="TB_PARTY_ID"
                                  constraintName="FK_FKFTD5ORW2ETIU4GHMN3MHX9I"/>

        <dropForeignKeyConstraint baseTableName="TB_SIGNAL_MESSAGE"
                                  constraintName="FK_M6UU2Y6G9BUET3O3K1N4QXWEC"/>

        <dropForeignKeyConstraint baseTableName="TB_MESSAGE_ACKNW_PROP"
                                  constraintName="FK_MSG_ACK_PROP_MSG_ACK"/>

        <dropForeignKeyConstraint baseTableName="TB_ERROR"
                                  constraintName="FK_PRRCMI4GRM4TXHFSFNFHGQ1K1"/>

        <dropForeignKeyConstraint baseTableName="TB_RAWENVELOPE_LOG"
                                  constraintName="FK_SIGNALMSG_ID_FK_RAWENV_ID"/>

        <dropForeignKeyConstraint baseTableName="TB_PART_INFO"
                                  constraintName="FK_TQ6LBN3MP0VSFC6QQU7WXY54G"/>

        <dropForeignKeyConstraint baseTableName="TB_RAWENVELOPE_LOG"
                                  constraintName="FK_USERMSG_ID_FK_RAWENV_ID"/>

        <dropForeignKeyConstraint baseTableName="TB_PARTY_ID"
                                  constraintName="FK_YLUB8LPTGVSCH02MJ71EUUIL"/>

        <addForeignKeyConstraint baseColumnNames="MESSAGEPROPERTIES_ID" baseTableName="TB_PROPERTY"
                                 constraintName="FK_2H31P0A2Y6WEG2GRH70C9CYVA" deferrable="false"
                                 initiallyDeferred="false" onDelete="CASCADE" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_USER_MESSAGE"/>

        <addForeignKeyConstraint baseColumnNames="USER_MESSAGE_ID" baseTableName="TB_MESSAGING"
                                 constraintName="FK_433RGM5A446T59Q6JKB885L3X" deferrable="false"
                                 initiallyDeferred="false" onDelete="CASCADE" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_USER_MESSAGE"/>

        <addForeignKeyConstraint baseColumnNames="SIGNAL_MESSAGE_ID" baseTableName="TB_MESSAGING"
                                 constraintName="FK_53GP9SMTEMQCUIO8O9T10NARM" deferrable="false"
                                 initiallyDeferred="false" onDelete="CASCADE" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_SIGNAL_MESSAGE"/>

        <addForeignKeyConstraint baseColumnNames="RECEIPT_ID" baseTableName="TB_RECEIPT_DATA"
                                 constraintName="FK_8NCCAE214MVS1KH5SGCJ3Y5OY" deferrable="false"
                                 initiallyDeferred="false" onDelete="CASCADE" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_RECEIPT"/>

        <addForeignKeyConstraint baseColumnNames="MESSAGEINFO_ID_PK" baseTableName="TB_USER_MESSAGE"
                                 constraintName="FK_BE4XC1069QYW2KLHVM3XMG26S" deferrable="false"
                                 initiallyDeferred="false" onDelete="CASCADE" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_MESSAGE_INFO"/>

        <addForeignKeyConstraint baseColumnNames="MESSAGEINFO_ID_PK" baseTableName="TB_SIGNAL_MESSAGE"
                                 constraintName="FK_C08LJJWI4P9DX1RJTCDBE1SFU" deferrable="false"
                                 initiallyDeferred="false" onDelete="CASCADE" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_MESSAGE_INFO"/>

        <addForeignKeyConstraint baseColumnNames="PARTPROPERTIES_ID" baseTableName="TB_PROPERTY"
                                 constraintName="FK_CWYLVG6ERNWBA61MO3YAGMKG8" deferrable="false"
                                 initiallyDeferred="false" onDelete="CASCADE" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_PART_INFO"/>

        <addForeignKeyConstraint baseColumnNames="FROM_ID" baseTableName="TB_PARTY_ID"
                                 constraintName="FK_FKFTD5ORW2ETIU4GHMN3MHX9I" deferrable="false"
                                 initiallyDeferred="false" onDelete="CASCADE" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_USER_MESSAGE"/>

        <addForeignKeyConstraint baseColumnNames="RECEIPT_ID_PK" baseTableName="TB_SIGNAL_MESSAGE"
                                 constraintName="FK_M6UU2Y6G9BUET3O3K1N4QXWEC" deferrable="false"
                                 initiallyDeferred="false" onDelete="CASCADE" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_RECEIPT"/>

        <addForeignKeyConstraint baseColumnNames="FK_MSG_ACKNOWLEDGE" baseTableName="TB_MESSAGE_ACKNW_PROP"
                                 constraintName="FK_MSG_ACK_PROP_MSG_ACK" deferrable="false"
                                 initiallyDeferred="false" onDelete="CASCADE" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_MESSAGE_ACKNW"/>

        <addForeignKeyConstraint baseColumnNames="SIGNALMESSAGE_ID" baseTableName="TB_ERROR"
                                 constraintName="FK_PRRCMI4GRM4TXHFSFNFHGQ1K1" deferrable="false"
                                 initiallyDeferred="false" onDelete="CASCADE" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_SIGNAL_MESSAGE"/>

        <addForeignKeyConstraint baseColumnNames="SIGNALMESSAGE_ID_FK" baseTableName="TB_RAWENVELOPE_LOG"
                                 constraintName="FK_SIGNALMSG_ID_FK_RAWENV_ID" deferrable="false"
                                 initiallyDeferred="false" onDelete="CASCADE" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_SIGNAL_MESSAGE"/>

        <addForeignKeyConstraint baseColumnNames="PAYLOADINFO_ID" baseTableName="TB_PART_INFO"
                                 constraintName="FK_TQ6LBN3MP0VSFC6QQU7WXY54G" deferrable="false"
                                 initiallyDeferred="false" onDelete="CASCADE" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_USER_MESSAGE"/>

        <addForeignKeyConstraint baseColumnNames="USERMESSAGE_ID_FK" baseTableName="TB_RAWENVELOPE_LOG"
                                 constraintName="FK_USERMSG_ID_FK_RAWENV_ID" deferrable="false"
                                 initiallyDeferred="false" onDelete="CASCADE" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_USER_MESSAGE"/>

        <addForeignKeyConstraint baseColumnNames="TO_ID" baseTableName="TB_PARTY_ID"
                                 constraintName="FK_YLUB8LPTGVSCH02MJ71EUUIL" deferrable="false"
                                 initiallyDeferred="false" onDelete="CASCADE" onUpdate="RESTRICT"
                                 referencedColumnNames="ID_PK" referencedTableName="TB_USER_MESSAGE"/>

        <createIndex indexName="IDX_SEND_ATTEMPT_MESSAGE_ID" tableName="TB_SEND_ATTEMPT">
            <column name="MESSAGE_ID"/>
        </createIndex>

        <createIndex indexName="IDX_MESSAGE_IN_ERROR_ID" tableName="TB_ERROR_LOG">
            <column name="MESSAGE_IN_ERROR_ID"/>
        </createIndex>

        <createIndex indexName="IDX_MSG_ACKNW_MESSAGE_ID" tableName="TB_MESSAGE_ACKNW">
            <column name="MESSAGE_ID"/>
        </createIndex>
    </changeSet>

    <changeSet author="Joze Rihtarsic" id="EDELIVERY-4335">
        <createTable tableName="TB_CERTIFICATE_AUD">
            <column name="ID_PK" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_CERTIFICATE_AUD"/>
            </column>
            <column name="REV" type="BIGINT">
                <constraints primaryKey="true" primaryKeyName="PK_CERTIFICATE_AUD"/>
            </column>
            <column name="REVTYPE" type="TINYINT"/>
            <column name="CERTIFICATE_ALIAS" type="VARCHAR(255)" />
            <column name="NOT_VALID_BEFORE_DATE" type="DATETIME" />
            <column name="NOT_VALID_AFTER_DATE" type="DATETIME" />
            <column name="REVOKE_NOTIFICATION_DATE" type="TIMESTAMP"/>
            <column name="ALERT_IMM_NOTIFICATION_DATE" type="TIMESTAMP"/>
            <column name="ALERT_EXP_NOTIFICATION_DATE" type="TIMESTAMP"/>
            <column name="CERTIFICATE_STATUS" type="VARCHAR(255)" />
            <column name="CERTIFICATE_TYPE" type="VARCHAR(255)" />
        </createTable>

        <createIndex indexName="IDX_FK_CERTIFICATE_AUD_REV" tableName="TB_CERTIFICATE_AUD">
            <column name="REV"/>
        </createIndex>

        <addForeignKeyConstraint baseColumnNames="REV" baseTableName="TB_CERTIFICATE_AUD"
                                 constraintName="FK_CERTIFICATE_AUD_REV" deferrable="false"
                                 initiallyDeferred="false" onDelete="RESTRICT" onUpdate="RESTRICT"
                                 referencedColumnNames="ID" referencedTableName="TB_REV_INFO"/>

    </changeSet>
</databaseChangeLog>